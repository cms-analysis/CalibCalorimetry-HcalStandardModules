process pedsfC = {
  #use for 15x and up
  untracked PSet maxEvents = {untracked int32 input = 500}
  source = HcalTBSource{
  untracked vstring fileNames = {"file:/bigspool/usc/USC_035389.root"}
#   untracked vstring fileNames = {"file:/afs/cern.ch/user/d/devildog/scratch0/dummy"}
#   source = NewEventStreamFileReader {
#                untracked vstring fileNames = { 'rfio:/castor/cern.ch/cms/store/data/GlobalNov07/A/000/030/432/GlobalNov07.00035389.0001.A.storageManager.0.0000.dat' }
    untracked vstring streams = { 'HCAL_Trigger',
      'HCAL_DCC700','HCAL_DCC701','HCAL_DCC702','HCAL_DCC703',
      'HCAL_DCC704','HCAL_DCC705','HCAL_DCC706','HCAL_DCC707',
      'HCAL_DCC708','HCAL_DCC709','HCAL_DCC710','HCAL_DCC711',
      'HCAL_DCC712','HCAL_DCC713','HCAL_DCC714','HCAL_DCC715',
      'HCAL_DCC716','HCAL_DCC717','HCAL_DCC718','HCAL_DCC719',
      'HCAL_DCC720','HCAL_DCC721','HCAL_DCC722','HCAL_DCC723',
      'HCAL_DCC724','HCAL_DCC725','HCAL_DCC726','HCAL_DCC727',
      'HCAL_DCC728','HCAL_DCC729','HCAL_DCC730','HCAL_DCC731'
      }
    }

     module hcalDigis = HcalRawToDigi {
       int32 firstSample = 0
       int32 lastSample = 9
       untracked bool UnpackCalib = true
       bool FilterDataQuality = true
       untracked bool ComplainEmptyData = false
       InputTag InputLabel = source
     }

     module analpeds = HcalPedestalAnalyzer {
       untracked string outputPedestalsDest = "35389-peds_fC.txt"
       untracked string outputPedestalWidthsDest = "35389-widths_fC.txt"
       untracked string outputFileHist = "35389-peds_fC.root"
       untracked int32 hiSaveflag = 1
       untracked int32 nevtsample = 9999999
       untracked int32 pedsinADC = 0
       untracked int32 pedValflag = 0
     }

es_module hcal_db_producer = HcalDbProducer {
         untracked vstring dump = {""}
         untracked string file = ""
}

es_source es_hardcode = HcalHardcodeCalibrations {untracked vstring toGet = {"GainWidths", "channelQuality", "QIEShape"}}
  include "CondCore/DBCommon/data/CondDBSetup.cfi"
  es_source es_pool = PoolDBESSource {
      using CondDBSetup
      string connect = "frontier://FrontierOn/CMS_COND_ON_170_HCAL"
      string timetype = "runnumber"
      string appendToDataLabel = "reference"
      untracked uint32 authenticationMethod = 0
           VPSet toGet = {
                    {string record = "HcalPedestalsRcd"
                     string tag    = "hcal_pedestals_fC_gren_v2"
                    },
                    {string record = "HcalPedestalWidthsRcd"
                     string tag =    "hcal_widths_fC_gren_v2"
                    },
                    {string record = "HcalGainsRcd"
                     string tag =    "hcal_gains_v1"
                    },
                    {string record = "HcalQIEDataRcd"
                     string tag =    "qie_normalmode_v3"
                    },
                    {string record = "HcalElectronicsMapRcd"
                     string tag =    "official_emap_v5_080208"
                    }
           }
  }

#es_source es_ascii = HcalTextCalibrations{
#                       string appendToDataLabel = "reference"
#                       VPSet input = {
#                        {string object = "ElectronicsMap"
#                         FileInPath file = "CondFormats/HcalObjects/data/official_emap_16x_v1.txt"
#                        }
#                       }
#}

path p = {hcalDigis, analpeds}
}
